<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NightWolf ¬∑ Portafolio</title>
  <meta name="description" content="Portafolio de Edgar (NightWolf): Dashboards Power BI, modelos ML y proyectos de IA aplicada." />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Edgar NightWolf - Data Scientist & BI Developer">
  <meta property="og:description" content="Dashboards Power BI, modelos ML y proyectos de IA aplicada. Construyo experiencias de datos que impulsan decisiones de negocio.">
  <meta property="og:image" content="https://blackeddit.github.io/PortFolio/assets/img/imagen%20personal.jpg">
  <meta property="og:url" content="https://blackeddit.github.io/PortFolio/">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:title" content="Edgar NightWolf - Data Scientist & BI Developer">
  <meta property="twitter:description" content="Dashboards Power BI, modelos ML y proyectos de IA aplicada">
  <meta property="twitter:image" content="https://blackeddit.github.io/PortFolio/assets/img/imagen%20personal.jpg">

  <!-- SEO -->
  <meta name="keywords" content="Power BI, Data Science, Machine Learning, TensorFlow.js, Dashboards, DAX, Python, Business Intelligence">
  <meta name="author" content="Edgar NightWolf">
  <link rel="canonical" href="https://blackeddit.github.io/PortFolio/">
  
  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üê∫</text></svg>">

  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Part√≠culas -->
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>

  <!-- PRELOAD de tu foto (con espacio escapado) -->
  <link rel="preload" as="image" href="assets/img/imagen%20personal.jpg" />

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Edgar NightWolf",
    "jobTitle": "Data Scientist & BI Developer",
    "description": "Especialista en Power BI, Machine Learning y proyectos de IA aplicada",
    "url": "https://blackeddit.github.io/PortFolio/",
    "image": "https://blackeddit.github.io/PortFolio/assets/img/imagen%20personal.jpg",
    "sameAs": [
      "https://github.com/BlackEddit",
      "https://www.linkedin.com/in/tuusuario"
    ],
    "knowsAbout": [
      "Power BI",
      "Data Science",
      "Machine Learning",
      "TensorFlow.js",
      "Business Intelligence",
      "DAX",
      "Python"
    ],
    "worksFor": {
      "@type": "Organization",
      "name": "Freelancer"
    }
  }
  </script>

  <style>
    /* ====== NIGHTWOLF VIBE ====== */
    .nw-glow{ text-shadow:0 0 10px #00ffc6,0 0 20px #00ffc6,0 0 40px #00ffc6 }
    .card{ transition:transform .18s ease, box-shadow .18s ease }
    .card:hover{ transform:translateY(-4px); box-shadow:0 10px 30px rgba(0,0,0,.35) }
    .shine{ position:relative; overflow:hidden }
    .shine::after{ content:""; position:absolute; inset:0; transform:translateX(-120%);
      background:linear-gradient(120deg,transparent 30%,rgba(255,255,255,.2) 50%,transparent 70%);
      transition:transform .6s ease }
    .shine:hover::after{ transform:translateX(120%) }
    html{ scroll-behavior:smooth }

    /* Fondo neon grid sutil */
    .nw-bg{ position:fixed; inset:0; z-index:-2; background:
      radial-gradient(1000px 800px at 80% -10%, rgba(16,185,129,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 120%, rgba(16,185,129,.08), transparent 60%),
      repeating-linear-gradient(to right, rgba(16,185,129,.05) 0 1px, transparent 1px 80px),
      repeating-linear-gradient(to bottom, rgba(16,185,129,.04) 0 1px, transparent 1px 80px);
      animation:gridFloat 18s ease-in-out infinite alternate }
    @keyframes gridFloat{ 0%{transform:translateY(0)} 100%{transform:translateY(15px)} }

    /* ====== Avatar: aro pulsante verde (m√°s neon) ====== */
    @keyframes nwPulse{ 0%{transform:scale(1)} 50%{transform:scale(1.04)} 100%{transform:scale(1)} }
    @keyframes ringHue {
      0%   { --ring-a:#10b981; --ring-b:#34d399; }
      40%  { --ring-a:#12f7d6; --ring-b:#00ffc6; }
      80%  { --ring-a:#00e091; --ring-b:#00ffa3; }
      100% { --ring-a:#10b981; --ring-b:#34d399; }
    }
    .avatar-wrap{
      position:relative; width:16rem; height:16rem; border-radius:9999px;
      animation:nwPulse 2.4s ease-in-out infinite, ringHue 10s linear infinite;
      filter: drop-shadow(0 0 22px rgba(16,185,129,.45));
    }
    .avatar-ring{
      position:absolute; inset:0; border-radius:inherit; box-shadow:0 0 32px var(--ring-a);
      border:3px solid transparent;
      -webkit-mask:
        radial-gradient(circle at center, #0000 70%, #000 71%) content-box,
        radial-gradient(circle at center, #000 69%, #000 100%);
              mask:
        radial-gradient(circle at center, #0000 70%, #000 71%) content-box,
        radial-gradient(circle at center, #000 69%, #000 100%);
      background: radial-gradient(closest-side, var(--ring-a), var(--ring-b)) border-box;
    }
    .avatar-core{
      position:absolute; inset:10px; border-radius:inherit;
      background: radial-gradient(60% 60% at 50% 50%, rgba(16,185,129,.18), transparent 70%);
      border:1px solid rgba(255,255,255,.08);
      overflow:hidden; display:grid; place-items:center;
      backdrop-filter: blur(2px);
    }
    .avatar-img{
      width:86%; height:86%; border-radius:9999px; object-fit:cover; object-position:center;
      box-shadow: 0 0 30px rgba(0,255,198,.25);
    }

    /* Confeti (click en el avatar) */
    .confetti{
      position:absolute; width:8px; height:8px; border-radius:2px;
      top:50%; left:50%; transform: translate(-50%,-50%);
      opacity:.95; pointer-events:none; animation:confOut 900ms ease-out forwards;
    }
    @keyframes confOut{
      to{ transform: translate(-50%,-50%) rotate(var(--rot)) translate(var(--tx), var(--ty)); opacity:0; }
    }

    /* Particles detr√°s de todo y sin bloquear eventos */
    #tsparticles{ position:fixed; inset:0; z-index:-1; pointer-events:none; }

    /* Toggle del player */
    .player-toggle{ position:fixed; right:1rem; bottom:5.5rem; z-index:60 }

    /* Animaciones adicionales */
    @keyframes fadeIn{ from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0)} }
    .animate-fade-in{ animation:fadeIn 0.3s ease-out }

    /* Focus states for accessibility */
    button:focus-visible, a:focus-visible {
      outline: 2px solid #10b981;
      outline-offset: 2px;
    }

    /* Improved transitions */
    .transition-colors{ transition: color 0.2s ease, background-color 0.2s ease, border-color 0.2s ease }
    .transition-all{ transition: all 0.3s ease }

    /* Loading spinner keyframes */
    @keyframes spin{ to{ transform: rotate(360deg) } }

    /* ===== DARK/LIGHT MODE TOGGLE ===== */
    :root {
      --bg-primary: 24 24 27; /* zinc-950 */
      --bg-secondary: 39 39 42; /* zinc-800 */
      --bg-card: 39 39 42; /* zinc-800 */
      --text-primary: 244 244 245; /* zinc-100 */
      --text-secondary: 161 161 170; /* zinc-400 */
      --border: 255 255 255;
      --border-opacity: 0.1;
      --emerald: 16 185 129;
      --accent: 16 185 129;
    }

    /* Light Theme */
    [data-theme="light"] {
      --bg-primary: 255 255 255; /* white */
      --bg-secondary: 248 250 252; /* slate-50 */
      --bg-card: 241 245 249; /* slate-100 */
      --text-primary: 15 23 42; /* slate-900 */
      --text-secondary: 71 85 105; /* slate-600 */
      --border: 15 23 42;
      --border-opacity: 0.12;
      --emerald: 5 150 105; /* emerald-600 */
      --accent: 5 150 105;
    }

    /* Cyberpunk Theme */
    [data-theme="cyber"] {
      --bg-primary: 0 0 0; /* pure black */
      --bg-secondary: 20 20 20; /* almost black */
      --bg-card: 30 30 30; /* dark gray */
      --text-primary: 0 255 255; /* cyan */
      --text-secondary: 255 0 255; /* magenta */
      --border: 0 255 255;
      --border-opacity: 0.3;
      --emerald: 0 255 255; /* cyan */
      --accent: 255 0 255; /* magenta */
    }

    /* Ocean Theme */
    [data-theme="ocean"] {
      --bg-primary: 12 74 110; /* blue-900 */
      --bg-secondary: 30 58 138; /* blue-800 */
      --bg-card: 29 78 216; /* blue-700 */
      --text-primary: 219 234 254; /* blue-100 */
      --text-secondary: 147 197 253; /* blue-300 */
      --border: 219 234 254;
      --border-opacity: 0.15;
      --emerald: 34 197 94; /* green-500 */
      --accent: 59 130 246; /* blue-500 */
    }

    /* Purple Theme */
    [data-theme="purple"] {
      --bg-primary: 88 28 135; /* purple-900 */
      --bg-secondary: 107 33 168; /* purple-800 */
      --bg-card: 126 34 206; /* purple-700 */
      --text-primary: 243 232 255; /* purple-100 */
      --text-secondary: 196 181 253; /* purple-300 */
      --border: 243 232 255;
      --border-opacity: 0.15;
      --emerald: 34 197 94; /* green-500 */
      --accent: 168 85 247; /* purple-500 */
    }

    /* Matrix Theme */
    [data-theme="matrix"] {
      --bg-primary: 0 20 0; /* dark green */
      --bg-secondary: 0 40 0; /* darker green */
      --bg-card: 0 60 0; /* green-ish */
      --text-primary: 0 255 0; /* pure green */
      --text-secondary: 34 197 94; /* green-500 */
      --border: 0 255 0;
      --border-opacity: 0.2;
      --emerald: 0 255 0; /* pure green */
      --accent: 34 197 94; /* green-500 */
    }

    /* Theme transition */
    *, *::before, *::after {
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease !important;
    }

    /* Override default classes with CSS variables */
    .bg-zinc-950 { background-color: rgb(var(--bg-primary)) !important; }
    .bg-zinc-900 { background-color: rgb(var(--bg-secondary)) !important; }
    .bg-zinc-800 { background-color: rgb(var(--bg-card)) !important; }
    .text-zinc-100 { color: rgb(var(--text-primary)) !important; }
    .text-zinc-300 { color: rgb(var(--text-secondary)) !important; }
    .text-zinc-400 { color: rgb(var(--text-secondary)) !important; }
    .text-zinc-500 { color: rgb(var(--text-secondary)) !important; }
    .border-white\/10 { border-color: rgba(var(--border), var(--border-opacity)) !important; }
    .border-white\/15 { border-color: rgba(var(--border), calc(var(--border-opacity) + 0.05)) !important; }

    /* Theme toggle button - now with dropdown */
    .theme-toggle {
      position: fixed;
      top: 50%;
      right: 1rem;
      transform: translateY(-50%);
      z-index: 70;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: rgba(var(--bg-card), 0.9);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(var(--border), var(--border-opacity));
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(var(--accent), 0.2);
    }

    .theme-toggle:hover {
      transform: translateY(-50%) scale(1.05);
      box-shadow: 0 8px 30px rgba(var(--accent), 0.4);
    }

    .theme-icon {
      font-size: 20px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Theme dropdown menu */
    .theme-dropdown {
      position: absolute;
      right: 60px;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(var(--bg-card), 0.95);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(var(--border), var(--border-opacity));
      border-radius: 12px;
      padding: 8px;
      min-width: 160px;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .theme-dropdown.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(-50%) translateX(-4px);
    }

    .theme-option {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      color: rgb(var(--text-primary));
      transition: all 0.2s ease;
    }

    .theme-option:hover {
      background: rgba(var(--accent), 0.1);
      transform: translateX(4px);
    }

    .theme-option.active {
      background: rgba(var(--accent), 0.15);
      color: rgb(var(--accent));
    }

    /* Theme-specific backgrounds */
    [data-theme="cyber"] .nw-bg {
      background:
        radial-gradient(1000px 800px at 80% -10%, rgba(0, 255, 255, 0.15), transparent 60%),
        radial-gradient(900px 700px at -10% 120%, rgba(255, 0, 255, 0.1), transparent 60%),
        repeating-linear-gradient(to right, rgba(0, 255, 255, 0.05) 0 1px, transparent 1px 100px),
        repeating-linear-gradient(to bottom, rgba(255, 0, 255, 0.03) 0 1px, transparent 1px 100px);
    }

    [data-theme="ocean"] .nw-bg {
      background:
        radial-gradient(1000px 800px at 80% -10%, rgba(59, 130, 246, 0.12), transparent 60%),
        radial-gradient(900px 700px at -10% 120%, rgba(34, 197, 94, 0.08), transparent 60%),
        repeating-linear-gradient(to right, rgba(59, 130, 246, 0.04) 0 1px, transparent 1px 80px),
        repeating-linear-gradient(to bottom, rgba(34, 197, 94, 0.03) 0 1px, transparent 1px 80px);
    }

    [data-theme="purple"] .nw-bg {
      background:
        radial-gradient(1000px 800px at 80% -10%, rgba(168, 85, 247, 0.15), transparent 60%),
        radial-gradient(900px 700px at -10% 120%, rgba(34, 197, 94, 0.08), transparent 60%),
        repeating-linear-gradient(to right, rgba(168, 85, 247, 0.05) 0 1px, transparent 1px 80px),
        repeating-linear-gradient(to bottom, rgba(34, 197, 94, 0.03) 0 1px, transparent 1px 80px);
    }

    [data-theme="matrix"] .nw-bg {
      background:
        radial-gradient(1000px 800px at 80% -10%, rgba(0, 255, 0, 0.1), transparent 60%),
        radial-gradient(900px 700px at -10% 120%, rgba(34, 197, 94, 0.08), transparent 60%),
        repeating-linear-gradient(to right, rgba(0, 255, 0, 0.03) 0 1px, transparent 1px 90px),
        repeating-linear-gradient(to bottom, rgba(34, 197, 94, 0.02) 0 1px, transparent 1px 90px);
    }

    [data-theme="light"] .nw-bg {
      background:
        radial-gradient(1000px 800px at 80% -10%, rgba(var(--emerald), 0.06), transparent 60%),
        radial-gradient(900px 700px at -10% 120%, rgba(var(--emerald), 0.04), transparent 60%),
        repeating-linear-gradient(to right, rgba(var(--emerald), 0.02) 0 1px, transparent 1px 80px),
        repeating-linear-gradient(to bottom, rgba(var(--emerald), 0.015) 0 1px, transparent 1px 80px);
    }

    /* Theme-specific glow effects */
    [data-theme="cyber"] .nw-glow {
      text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff, 0 0 40px #00ffff, 0 0 60px #ff00ff;
    }

    [data-theme="ocean"] .nw-glow {
      text-shadow: 0 0 10px rgb(59, 130, 246), 0 0 20px rgb(59, 130, 246), 0 0 40px rgb(34, 197, 94);
    }

    [data-theme="purple"] .nw-glow {
      text-shadow: 0 0 10px rgb(168, 85, 247), 0 0 20px rgb(168, 85, 247), 0 0 40px rgb(168, 85, 247);
    }

    [data-theme="matrix"] .nw-glow {
      text-shadow: 0 0 10px #00ff00, 0 0 20px #00ff00, 0 0 40px #00ff00, 0 0 60px #22c55e;
    }

    [data-theme="light"] .nw-glow {
      text-shadow: 0 0 10px rgba(var(--emerald), 0.6), 0 0 20px rgba(var(--emerald), 0.4), 0 0 40px rgba(var(--emerald), 0.3);
    }

    /* Particles theme adjustment */
    [data-theme="light"] #tsparticles { opacity: 0.6; }
    [data-theme="cyber"] #tsparticles { opacity: 0.8; }
    [data-theme="matrix"] #tsparticles { opacity: 0.7; }
  </style>
  </style>
</head>

<body class="bg-zinc-950 text-zinc-100 font-sans selection:bg-emerald-500/30">
  <!-- Fondo -->
  <div class="nw-bg"></div>
  <!-- Part√≠culas -->
  <div id="tsparticles"></div>

  <!-- NAV -->
  <header class="sticky top-0 z-50 border-b border-white/10 bg-zinc-950/70 backdrop-blur">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#top" class="text-xl font-bold tracking-wide nw-glow">NightWolf<span class="text-emerald-400">.dev</span></a>
      
      <!-- Desktop Nav -->
      <nav class="hidden sm:flex gap-6 text-sm">
        <a href="#dashboards" class="hover:text-emerald-400 transition-colors">Dashboards</a>
        <a href="#modelos" class="hover:text-emerald-400 transition-colors">Modelos</a>
        <a href="#mnist" class="hover:text-emerald-400 transition-colors">Demo IA</a>
        <a href="#proyecto-estrella" class="hover:text-emerald-400 transition-colors">Proyecto Ching√≥n</a>
        <a href="#contacto" class="hover:text-emerald-400 transition-colors">Contacto</a>
      </nav>
      
      <div class="flex items-center gap-3">
        <a href="cv.pdf" class="text-sm px-3 py-1.5 rounded-full border border-white/15 hover:border-emerald-500/60 hover:text-emerald-300 transition-colors">CV</a>
        
        <!-- Hamburger Button (Mobile) -->
        <button id="hamburger" class="sm:hidden p-2 rounded-lg hover:bg-zinc-800/50 transition-colors" aria-label="Men√∫">
          <div class="w-5 h-5 flex flex-col justify-center items-center space-y-1">
            <div class="w-full h-0.5 bg-current transition-all duration-300 transform origin-center" id="line1"></div>
            <div class="w-full h-0.5 bg-current transition-all duration-300" id="line2"></div>
            <div class="w-full h-0.5 bg-current transition-all duration-300 transform origin-center" id="line3"></div>
          </div>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <nav id="mobileMenu" class="sm:hidden absolute top-full left-0 right-0 bg-zinc-950/95 backdrop-blur border-b border-white/10 transform -translate-y-full opacity-0 transition-all duration-300 pointer-events-none">
      <div class="max-w-6xl mx-auto px-4 py-4 space-y-3">
        <a href="#dashboards" class="block py-2 text-zinc-300 hover:text-emerald-400 transition-colors">üìä Dashboards</a>
        <a href="#modelos" class="block py-2 text-zinc-300 hover:text-emerald-400 transition-colors">üß† Modelos</a>
        <a href="#mnist" class="block py-2 text-zinc-300 hover:text-emerald-400 transition-colors">üéØ Demo IA</a>
        <a href="#proyecto-estrella" class="block py-2 text-zinc-300 hover:text-emerald-400 transition-colors">‚≠ê Proyecto Ching√≥n</a>
        <a href="#contacto" class="block py-2 text-zinc-300 hover:text-emerald-400 transition-colors">üìß Contacto</a>
      </div>
    </nav>
  </header>

  <!-- HERO -->
  <section id="top" class="relative overflow-hidden">
    <div class="absolute -top-40 -right-40 w-[28rem] h-[28rem] rounded-full bg-emerald-500/10 blur-3xl"></div>

    <div class="max-w-6xl mx-auto px-4 py-14 sm:py-20 grid md:grid-cols-2 gap-10 items-center relative z-[1]">
      <!-- Columna izquierda -->
      <div>
        <h1 class="text-4xl sm:text-5xl font-extrabold leading-tight">
          Edgar <span class="text-emerald-400">"NightWolf"</span>
          <span class="block text-2xl sm:text-3xl mt-2">Data ¬∑ BI ¬∑ IA Aplicada</span>
        </h1>
        
        <!-- Slogan principal -->
        <div class="mt-3 mb-4">
          <p class="text-lg sm:text-xl font-medium text-emerald-300 italic">
            "The thing is not how you do it.<br>
            <span class="text-emerald-400 font-bold">The thing is make it happen."</span>
          </p>
        </div>
        
        <p class="mt-4 text-zinc-300 max-w-prose">
          Construyo dashboards con intenci√≥n (Power BI + DAX/HTML), modelos que sirven al negocio y experiencias UI que cuentan historias claras.
        </p>
        <div class="mt-6 flex gap-3">
          <a href="#proyecto-estrella" class="shine inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-600 hover:bg-emerald-500">Ver proyecto ching√≥n</a>
          <a href="#dashboards" class="inline-flex items-center gap-2 px-4 py-2 rounded-xl border border-white/20 hover:border-emerald-400/60">Dashboards</a>
        </div>
        <div class="mt-6 text-xs text-zinc-400 flex items-center gap-3">
          <span class="inline-block w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
          <span>Play Axis ¬∑ Podio + Barra scrollable ¬∑ SLA Gauge ¬∑ Medidas compactas ¬∑ RAG + Orquestaci√≥n</span>
        </div>
      </div>

      <!-- Columna derecha: TU FOTO con aro pulsante -->
      <div class="relative mx-auto">
        <div class="avatar-wrap" id="avatarWrap" style="--ring-a:#10b981;--ring-b:#34d399;">
          <div class="avatar-ring"></div>
          <div class="avatar-core">
            <img
              src="assets/img/imagen%20personal.jpg"
              alt="Foto de Edgar NightWolf"
              class="avatar-img"
              loading="eager"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- DASHBOARDS -->
  <section id="dashboards" class="max-w-6xl mx-auto px-4 py-12 sm:py-16">
    <div class="flex items-end justify-between">
      <h2 class="text-2xl sm:text-3xl font-bold">Dashboards</h2>
      <a href="#contacto" class="text-sm text-emerald-400 hover:underline">¬øColaboramos?</a>
    </div>

    <article class="card rounded-2xl border border-white/10 bg-zinc-900/60 p-5 mt-6">
      <header class="flex items-center justify-between">
        <h3 class="text-lg font-semibold">üèÜ Dashboards</h3>
        <span class="text-xs text-zinc-400">Power BI</span>
      </header>

      <p class="text-sm text-zinc-300 mt-2">
        Cambia entre los dos reportes con el selector.
      </p>

      <!-- Conmutador -->
      <div class="mt-3 inline-flex items-center gap-1 p-1 bg-zinc-800/40 border border-white/10 rounded-xl text-xs">
        <button id="btnDash1" class="px-3 py-1.5 rounded-lg bg-emerald-600 text-white shadow">
          Complementos 2025
        </button>
        <button id="btnDash2" class="px-3 py-1.5 rounded-lg hover:bg-zinc-700">
          Diario Complementos
        </button>
      </div>

      <!-- Contenedor del iframe -->
      <div id="dashWrap" class="mt-3 aspect-video rounded-xl overflow-hidden border border-emerald-500/60 relative">
        <!-- Loading overlay -->
        <div id="dashLoader" class="absolute inset-0 bg-zinc-900/80 backdrop-blur-sm flex items-center justify-center z-10 transition-opacity duration-300">
          <div class="text-center">
            <div class="animate-spin w-8 h-8 border-2 border-emerald-500 border-t-transparent rounded-full mx-auto mb-2"></div>
            <p class="text-sm text-emerald-400">Cargando dashboard...</p>
          </div>
        </div>
        
        <iframe
          id="pbiFrame"
          title="COMPLEMENTOS DE TARIFA 2025"
          class="w-full h-full transition-opacity duration-300"
          src="https://app.powerbi.com/view?r=eyJrIjoiNjhhYTRmYzMtZTI4Zi00MzlhLWEwN2QtMGNmYjEzZGJhNTQyIiwidCI6IjEyMDFlNjcwLTI4YjQtNDg1ZC05OTNhLWIxYzU0OGRhMmZhYiJ9"
          frameborder="0"
          allowfullscreen="true">
        </iframe>
      </div>

      <footer class="mt-3 flex flex-wrap gap-2 text-xs text-zinc-400">
        <span class="px-2 py-1 rounded-full border border-white/10">DAX</span>
        <span class="px-2 py-1 rounded-full border border-white/10">HTML/SVG</span>
        <span class="px-2 py-1 rounded-full border border-white/10">UX para BI</span>
      </footer>
    </article>

    <div class="grid md:grid-cols-2 gap-6 mt-6">
      <article class="card rounded-2xl border border-white/10 bg-zinc-900/60 p-5">
        <h4 class="font-semibold">üö¶ Veloc√≠metro SLA</h4>
        <p class="text-sm text-zinc-300 mt-1">Gauge personalizado con estados por desfase y % on-time.</p>
        <img src="assets/img/sla_gauge.png" class="mt-3 rounded-lg border border-white/10" alt="SLA Gauge" />
      </article>
      <article class="card rounded-2xl border border-white/10 bg-zinc-900/60 p-5">
        <h4 class="font-semibold">üß© UI Components para BI</h4>
        <p class="text-sm text-zinc-300 mt-1">Header, ticker, progress bar y cebra reutilizables.</p>
        <img src="assets/img/ui_bi.png" class="mt-3 rounded-lg border border-white/10" alt="UI BI" />
      </article>
    </div>

    <div class="mt-6 text-right">
      <a href="dashboards.html" class="text-sm text-emerald-400 hover:underline">Ver todos los dashboards ‚Üí</a>
    </div>
  </section>

  <!-- MODELOS -->
  <section id="modelos" class="max-w-6xl mx-auto px-4 py-12 sm:py-16">
    <h2 class="text-2xl sm:text-3xl font-bold">Modelos</h2>
    <div class="grid md:grid-cols-2 gap-6 mt-6">
      <article class="card rounded-2xl border border-white/10 bg-zinc-900/60 p-5">
        <h4 class="font-semibold">üìà Regresi√≥n de Beneficios</h4>
        <p class="text-sm text-zinc-300 mt-1">Regresi√≥n lineal desde cero (NumPy) para predecir <em>insurance_benefits</em>. M√©tricas: RMSE y R¬≤.</p>
        <img src="assets/img/regresion.png" class="mt-3 rounded-lg border border-white/10" alt="Regresi√≥n" />
      </article>
      <article class="card rounded-2xl border border-white/10 bg-zinc-900/60 p-5">
        <h4 class="font-semibold">üß† Clasificaci√≥n simple</h4>
        <p class="text-sm text-zinc-300 mt-1">Baseline con m√©tricas, feature scaling y comparaci√≥n.</p>
        <img src="assets/img/clasificacion.png" class="mt-3 rounded-lg border border-white/10" alt="Clasificaci√≥n" />
      </article>
    </div>
    <div class="mt-6 text-right">
      <a href="models.html" class="text-sm text-emerald-400 hover:underline">Ver m√°s modelos ‚Üí</a>
    </div>
  </section>

  <!-- DEMO: RECONOCEDOR DE D√çGITOS (TF.js) -->
  <section id="mnist" class="max-w-6xl mx-auto px-4 py-12 sm:py-16">
    <h2 class="text-2xl sm:text-3xl font-bold">Demo: Reconocedor de D√≠gitos (0‚Äì9)</h2>
    <p class="text-zinc-300 mt-2">Dibuja un n√∫mero y el modelo lo adivina. Corre 100% en tu navegador con TensorFlow.js.</p>

    <div class="card mt-4 rounded-2xl border border-white/10 bg-zinc-900/60 p-5">
      <div class="grid md:grid-cols-[320px_1fr] gap-6 items-start">
        <!-- Lienzo para dibujar -->
        <div class="space-y-3">
          <div class="rounded-xl border border-white/10 overflow-hidden bg-black">
            <canvas id="drawpad" width="280" height="280" class="block"></canvas>
          </div>
          <div class="flex gap-2">
            <button id="mnistClear" class="px-3 py-2 rounded-lg border border-white/15 hover:border-emerald-400/60 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500/50" aria-label="Limpiar canvas de dibujo">
              Limpiar
            </button>
            <button id="mnistPredict" class="px-3 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 text-white transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500/50" aria-label="Predecir d√≠gito dibujado">
              <span id="predictText">Predecir</span>
              <div id="predictSpinner" class="hidden inline-block w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin ml-1"></div>
            </button>
          </div>

          <div class="text-xs text-zinc-400">
            Consejo: escribe grande y centrado. Trazo blanco sobre fondo negro (como MNIST).
          </div>
        </div>

        <!-- Resultados -->
        <div class="space-y-4">
          <div class="grid grid-cols-[64px_1fr] gap-4 items-center">
            <div class="rounded-lg border border-white/10 bg-black p-2">
              <canvas id="mnistPreview" width="56" height="56" class="block mx-auto"></canvas>
              <div class="text-[10px] text-center text-zinc-400 mt-1">28√ó28</div>
            </div>
            <div>
              <div class="text-sm text-zinc-300">Top predicciones</div>
              <div id="mnistTop" class="mt-2 space-y-1 text-sm"></div>
            </div>
          </div>

          <div class="rounded-xl border border-white/10 overflow-hidden">
            <div class="bg-zinc-800/50 px-3 py-2 text-xs text-zinc-300">Distribuci√≥n completa (0‚Äì9)</div>
            <div id="mnistBars" class="p-3 grid grid-cols-1 gap-1 text-xs"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CHING√ìN -->
  <section id="proyecto-estrella" class="max-w-6xl mx-auto px-4 py-12 sm:py-16">
    <div class="rounded-2xl border border-emerald-500/40 p-6 bg-gradient-to-tr from-emerald-500/10 to-transparent">
      <h2 class="text-2xl sm:text-3xl font-extrabold nw-glow">Proyecto Ching√≥n ¬∑ RAG + Jarvis</h2>
      <p class="text-zinc-300 mt-2 max-w-prose">RAG para preguntas de negocio; Jarvis orquesta herramientas y devuelve respuestas accionables. Demo y write-up pr√≥ximamente.</p>
      <div class="mt-4 flex flex-wrap gap-2 text-xs text-zinc-400">
        <span class="px-2 py-1 rounded-full border border-white/10">Embeddings</span>
        <span class="px-2 py-1 rounded-full border border-white/10">Vector DB</span>
        <span class="px-2 py-1 rounded-full border border-white/10">Tool Use</span>
        <span class="px-2 py-1 rounded-full border border-white/10">Eval</span>
      </div>
      <div class="mt-6">
        <a href="rag-jarvis.html" class="shine inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-600 hover:bg-emerald-500">Ver caso completo</a>
      </div>
    </div>
  </section>

  <!-- CONTACTO -->
  <section id="contacto" class="max-w-6xl mx-auto px-4 py-16">
    <div class="rounded-2xl border border-white/10 p-6 bg-zinc-900/60">
      <h2 class="text-2xl sm:text-3xl font-bold">Contacto</h2>
      <p class="text-zinc-300 mt-2">¬øTienes un reto de BI / IA? Escr√≠beme:</p>
      <div class="mt-4 flex flex-wrap gap-3 text-sm">
        <a class="px-3 py-2 rounded-lg border border-white/15 hover:border-emerald-400/60" href="mailto:tuemail@dominio.com">tuemail@dominio.com</a>
        <a class="px-3 py-2 rounded-lg border border-white/15 hover:border-emerald-400/60" href="https://www.linkedin.com/in/tuusuario" target="_blank" rel="noreferrer">LinkedIn</a>
        <a class="px-3 py-2 rounded-lg border border-white/15 hover:border-emerald-400/60" href="https://github.com/BlackEddit" target="_blank" rel="noreferrer">GitHub</a>
      </div>
    </div>
    <footer class="text-xs text-zinc-500 text-center mt-8">¬© <span id="y"></span> NightWolf ¬∑ Hecho con GitHub Pages</footer>
  </section>

  <!-- PLAYER SPOTIFY -->
  <div id="playerWrap" class="fixed bottom-0 inset-x-0 border-t border-white/10 bg-zinc-900/80 backdrop-blur z-50 transition-all">
    <div class="max-w-6xl mx-auto px-4 py-2">
      <iframe style="border-radius:12px"
        src="https://open.spotify.com/embed/playlist/2Do8x2DPWjmDCQV77iZnut?utm_source=generator&theme=0"
        width="100%" height="80" frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
    </div>
  </div>
  <button id="toggleBtn"
    class="player-toggle px-3 py-1.5 text-xs rounded-full border border-white/15 hover:border-emerald-400/60 bg-zinc-900/80 backdrop-blur">
    Ocultar m√∫sica ‚§µ
  </button>

  <!-- Theme Toggle -->
  <button id="themeToggle" class="theme-toggle" aria-label="Cambiar tema">
    <span class="theme-icon" id="themeIcon">üåô</span>
  </button>

  <!-- Theme Dropdown -->
  <div id="themeDropdown" class="theme-dropdown">
    <div class="theme-option" data-theme="dark">üåô Dark</div>
    <div class="theme-option" data-theme="light">‚òÄÔ∏è Light</div>
    <div class="theme-option" data-theme="cyber">‚ö° Cyberpunk</div>
    <div class="theme-option" data-theme="ocean">üåä Ocean</div>
    <div class="theme-option" data-theme="purple">üîÆ Purple</div>
    <div class="theme-option" data-theme="matrix">üíö Matrix</div>
  </div>

  <!-- TensorFlow.js (versi√≥n estable para el modelo MNIST hosteado) -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.21.0/dist/tf.min.js"></script>

  <script>
    // A√±o din√°mico
    document.getElementById('y').textContent = new Date().getFullYear();

    // ===== MULTI THEME SYSTEM =====
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const themeDropdown = document.getElementById('themeDropdown');
    const body = document.body;
    
    const THEMES = {
      dark: { icon: 'üåô', name: 'Dark', colors: ["#10b981","#7b2eff","#ff005d"], linkColor: '#10b981' },
      light: { icon: '‚òÄÔ∏è', name: 'Light', colors: ["#059669","#6d28d9","#dc2626"], linkColor: '#059669' },
      cyber: { icon: '‚ö°', name: 'Cyberpunk', colors: ["#00ffff","#ff00ff","#ffff00"], linkColor: '#00ffff' },
      ocean: { icon: 'üåä', name: 'Ocean', colors: ["#3b82f6","#22c55e","#06b6d4"], linkColor: '#3b82f6' },
      purple: { icon: 'üîÆ', name: 'Purple', colors: ["#a855f7","#22c55e","#f59e0b"], linkColor: '#a855f7' },
      matrix: { icon: 'üíö', name: 'Matrix', colors: ["#00ff00","#22c55e","#65a30d"], linkColor: '#00ff00' }
    };
    
    let currentTheme = localStorage.getItem('theme') || 'dark';
    let isDropdownOpen = false;
    
    function setTheme(theme) {
      const themeData = THEMES[theme];
      if (!themeData) return;
      
      // Set theme attribute
      if (theme === 'dark') {
        body.removeAttribute('data-theme');
      } else {
        body.setAttribute('data-theme', theme);
      }
      
      // Update icon
      themeIcon.textContent = themeData.icon;
      
      // Update active option
      document.querySelectorAll('.theme-option').forEach(opt => {
        opt.classList.toggle('active', opt.dataset.theme === theme);
      });
      
      // Save to localStorage
      localStorage.setItem('theme', theme);
      currentTheme = theme;
      
      // Update particles if loaded
      if (window.tsParticles && window.PARTICLE_COLORS) {
        window.PARTICLE_COLORS = themeData.colors;
        window.PARTICLE_LINK_COLOR = themeData.linkColor;
        updateParticles();
      }
    }
    
    function updateParticles() {
      const container = tsParticles.domItem(0);
      if (container) {
        container.options.particles.color.value = window.PARTICLE_COLORS;
        container.options.particles.links.color = window.PARTICLE_LINK_COLOR;
        container.options.particles.opacity.value = ['cyber', 'matrix'].includes(currentTheme) ? 0.8 : 0.7;
        container.refresh();
      }
    }
    
    function toggleDropdown() {
      isDropdownOpen = !isDropdownOpen;
      themeDropdown.classList.toggle('active', isDropdownOpen);
      
      if (isDropdownOpen) {
        // Add click outside listener
        setTimeout(() => {
          document.addEventListener('click', closeDropdownOutside);
        }, 10);
      } else {
        document.removeEventListener('click', closeDropdownOutside);
      }
    }
    
    function closeDropdownOutside(e) {
      if (!themeToggle.contains(e.target) && !themeDropdown.contains(e.target)) {
        themeDropdown.classList.remove('active');
        isDropdownOpen = false;
        document.removeEventListener('click', closeDropdownOutside);
      }
    }
    
    // Theme option clicks
    themeDropdown.addEventListener('click', (e) => {
      if (e.target.classList.contains('theme-option')) {
        const theme = e.target.dataset.theme;
        setTheme(theme);
        toggleDropdown();
        
        // Fun animation
        themeIcon.style.transform = 'scale(0)';
        setTimeout(() => {
          themeIcon.style.transform = 'scale(1.2)';
          setTimeout(() => {
            themeIcon.style.transform = 'scale(1)';
          }, 200);
        }, 100);
      }
    });
    
    // Theme toggle click
    themeToggle.addEventListener('click', toggleDropdown);
    
    // Set initial theme
    setTheme(currentTheme);
    
    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.shiftKey) {
        const shortcuts = {
          'T': 'dark',
          'L': 'light',
          'C': 'cyber',
          'O': 'ocean',
          'P': 'purple',
          'M': 'matrix'
        };
        
        if (shortcuts[e.key.toUpperCase()]) {
          e.preventDefault();
          setTheme(shortcuts[e.key.toUpperCase()]);
          
          // Show theme name briefly
          const themeName = THEMES[shortcuts[e.key.toUpperCase()]].name;
          showThemeNotification(themeName);
        }
      }
    });
    
    function showThemeNotification(themeName) {
      const notification = document.createElement('div');
      notification.textContent = `Tema: ${themeName}`;
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 80px;
        background: rgba(var(--bg-card), 0.95);
        color: rgb(var(--text-primary));
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 14px;
        z-index: 1000;
        opacity: 0;
        transform: translateY(-20px);
        transition: all 0.3s ease;
        border: 1px solid rgba(var(--border), var(--border-opacity));
        backdrop-filter: blur(12px);
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.opacity = '1';
        notification.style.transform = 'translateY(0)';
      }, 10);
      
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(-20px)';
        setTimeout(() => notification.remove(), 300);
      }, 2000);
    }

    // ===== MOBILE MENU =====
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    const line1 = document.getElementById('line1');
    const line2 = document.getElementById('line2');
    const line3 = document.getElementById('line3');
    let isMenuOpen = false;

    function toggleMobileMenu() {
      isMenuOpen = !isMenuOpen;
      
      // Animate hamburger to X
      if (isMenuOpen) {
        line1.style.transform = 'rotate(45deg) translate(3px, 3px)';
        line2.style.opacity = '0';
        line3.style.transform = 'rotate(-45deg) translate(3px, -3px)';
        mobileMenu.style.transform = 'translateY(0)';
        mobileMenu.style.opacity = '1';
        mobileMenu.style.pointerEvents = 'auto';
      } else {
        line1.style.transform = 'none';
        line2.style.opacity = '1';
        line3.style.transform = 'none';
        mobileMenu.style.transform = 'translateY(-100%)';
        mobileMenu.style.opacity = '0';
        mobileMenu.style.pointerEvents = 'none';
      }
    }

    hamburger.addEventListener('click', toggleMobileMenu);
    
    // Close menu on link click
    mobileMenu.addEventListener('click', (e) => {
      if (e.target.tagName === 'A') {
        toggleMobileMenu();
      }
    });

    // Close menu on outside click
    document.addEventListener('click', (e) => {
      if (isMenuOpen && !hamburger.contains(e.target) && !mobileMenu.contains(e.target)) {
        toggleMobileMenu();
      }
    });

    // Toggle de player
    const btn = document.getElementById('toggleBtn');
    const wrap = document.getElementById('playerWrap');
    let hidden = false;
    btn.addEventListener('click', () => {
      hidden = !hidden;
      wrap.style.transform = hidden ? 'translateY(100%)' : 'translateY(0)';
      btn.textContent = hidden ? 'Mostrar m√∫sica ‚§¥' : 'Ocultar m√∫sica ‚§µ';
    });

    // ===== tsParticles: MULTI-THEME SYSTEM =====
    window.PARTICLE_COLORS = THEMES[currentTheme].colors;
    window.PARTICLE_LINK_COLOR = THEMES[currentTheme].linkColor;
    
    function initParticles() {
      const themeData = THEMES[currentTheme];
      const colors = themeData.colors;
      const linkColor = themeData.linkColor;
      const opacity = ['cyber', 'matrix'].includes(currentTheme) ? 0.8 : 0.7;
      const linkOpacity = ['light'].includes(currentTheme) ? 0.25 : 0.35;
      
      tsParticles.load("tsparticles", {
        fullScreen: { enable: false },
        detectRetina: true,
        particles: {
          number: { value: 80, density: { enable: true, area: 900 } },
          color: { value: colors },
          shape: { type: "circle" },
          opacity: { 
            value: opacity,
            random: { enable: true, minimumValue: opacity - 0.3 } 
          },
          size: { value: { min:1, max:3 } },
          links: { 
            enable: true, 
            distance: 130, 
            color: linkColor, 
            opacity: linkOpacity,
            width: 1 
          },
          move: { enable: true, speed: 1.2, outModes: { default: "out" } }
        },
        interactivity: {
          detectsOn: "window",
          events: {
            onHover: { enable: true, mode: "repulse" },
            onClick: { enable: true, mode: "push" },
            resize: true
          },
          modes: {
            repulse: { distance: 120, duration: .4 },
            push: { quantity: 4 }
          }
        }
      });
    }
    
    // Initialize particles after theme is set
    setTimeout(initParticles, 100);

    // ===== Explosi√≥n de confeti desde el avatar =====
    const avatar = document.getElementById('avatarWrap');
    function boomAt(el){
      const rect = el.getBoundingClientRect();
      const cx = rect.left + rect.width/2;
      const cy = rect.top + rect.height/2;
      const N = 42;
      const colors = window.PARTICLE_COLORS || THEMES.dark.colors;
      
      for(let i=0;i<N;i++){
        const d = document.createElement('div');
        d.className = 'confetti';
        const c = colors[i % colors.length];
        d.style.background = c;
        d.style.boxShadow = `0 0 15px ${c}`;
        const angle = Math.random()*360;
        const radius = 120 + Math.random()*120;
        d.style.setProperty('--rot', angle+'deg');
        d.style.setProperty('--tx', `${radius*Math.cos(angle*Math.PI/180)}px`);
        d.style.setProperty('--ty', `${radius*Math.sin(angle*Math.PI/180)}px`);
        d.style.left = cx+'px';
        d.style.top  = cy+'px';
        document.body.appendChild(d);
        setTimeout(()=> d.remove(), 1000);
      }
    }
    avatar.addEventListener('click', () => boomAt(avatar));

    // Hover del aro: sube el neon
    avatar.addEventListener('mouseover', () => {
      avatar.style.setProperty('--ring-a', '#12f7d6');
      avatar.style.setProperty('--ring-b', '#00ffc6');
    });
    avatar.addEventListener('mouseout', () => {
      avatar.style.setProperty('--ring-a', '#10b981');
      avatar.style.setProperty('--ring-b', '#34d399');
    });

    // === Dashboards din√°micos (Power BI) ===
    const DASHBOARDS = {
      d1: {
        title: "COMPLEMENTOS DE TARIFA 2025",
        url: "https://app.powerbi.com/view?r=eyJrIjoiNjhhYTRmYzMtZTI4Zi00MzlhLWEwN2QtMGNmYjEzZGJhNTQyIiwidCI6IjEyMDFlNjcwLTI4YjQtNDg1ZC05OTNhLWIxYzU0OGRhMmZhYiJ9"
      },
      d2: {
        title: "Diario Complementos",
        url: "https://app.powerbi.com/view?r=eyJrIjoiMDAzNTg1YjEtOWU4MS00YmMxLWIzNWMtYWU2MjA5ZjExZjEwIiwidCI6IjEyMDFlNjcwLTI4YjQtNDg1ZC05OTNhLWIxYzU0OGRhMmZhYiJ9"
      }
    };

    const $frame = document.getElementById('pbiFrame');
    const $b1 = document.getElementById('btnDash1');
    const $b2 = document.getElementById('btnDash2');
    const $loader = document.getElementById('dashLoader');

    function activate(btnOn, btnOff){
      btnOn.classList.add('bg-emerald-600','text-white','shadow');
      btnOff.classList.remove('bg-emerald-600','text-white','shadow');
    }

    function setDash(key){
      const d = DASHBOARDS[key];
      if(!d) return;
      
      // Mostrar loader
      $loader.style.opacity = '1';
      $loader.style.pointerEvents = 'auto';
      
      // efecto de carga suave
      $frame.classList.add('opacity-0');
      
      $frame.addEventListener('load', () => {
        $frame.classList.remove('opacity-0');
        // Ocultar loader despu√©s de un breve delay
        setTimeout(() => {
          $loader.style.opacity = '0';
          $loader.style.pointerEvents = 'none';
        }, 500);
      }, { once:true });

      $frame.title = d.title;
      $frame.src = d.url;
    }

    // Listeners
    $b1.addEventListener('click', () => { activate($b1,$b2); setDash('d1'); });
    $b2.addEventListener('click', () => { activate($b2,$b1); setDash('d2'); });

    // Hide initial loader after page load
    window.addEventListener('load', () => {
      setTimeout(() => {
        $loader.style.opacity = '0';
        $loader.style.pointerEvents = 'none';
      }, 1000);
    });

    // ===== DEMO MNIST: Reconocedor de d√≠gitos (fix URLs + fallback) =====
    (async function mnistDemo(){
      // üîÅ Lista de modelos v√°lidos (probamos en orden)
      const MODEL_URLS = [
        // Modelo oficial "transfer" hospedado por TensorFlow.js
        "https://storage.googleapis.com/tfjs-models/tfjs/mnist_transfer_cnn_v1/model.json",
        // Modelo comunitario (convnet) hospedado en GitHub Pages
        "https://hpssjellis.github.io/beginner-tensorflowjs-examples-in-javascript/saved-models/mnist/convnet/my-mnist01.json"
      ];

      // ---- (el resto de tu c√≥digo de canvas se queda igual) ----
      const canvas = document.getElementById('drawpad');
      const ctx = canvas.getContext('2d');
      const btnClear = document.getElementById('mnistClear');
      const btnPredict = document.getElementById('mnistPredict');
      const predictText = document.getElementById('predictText');
      const predictSpinner = document.getElementById('predictSpinner');
      const prevCanvas = document.getElementById('mnistPreview');
      const prevCtx = prevCanvas.getContext('2d');
      const topBox = document.getElementById('mnistTop');
      const barsBox = document.getElementById('mnistBars');

      function resetCanvas(){ ctx.fillStyle='#000'; ctx.fillRect(0,0,canvas.width,canvas.height); }
      resetCanvas();
      ctx.lineWidth = 26; ctx.lineJoin='round'; ctx.lineCap='round'; ctx.strokeStyle='#fff';

      let drawing=false,last=null;
      function getPos(e){ if(e.touches?.[0]){ const r=canvas.getBoundingClientRect(); return {x:e.touches[0].clientX-r.left,y:e.touches[0].clientY-r.top}; } return {x:e.offsetX,y:e.offsetY}; }
      function line(a,b){ ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke(); }
      function start(e){ drawing=true; last=getPos(e); }
      function move(e){ if(!drawing) return; const p=getPos(e); line(last,p); last=p; e.preventDefault(); }
      function end(){ drawing=false; last=null; }

      canvas.addEventListener('mousedown', start);
      canvas.addEventListener('mousemove', move);
      window.addEventListener('mouseup', end);
      canvas.addEventListener('touchstart', start, {passive:false});
      canvas.addEventListener('touchmove', move, {passive:false});
      canvas.addEventListener('touchend', end);

      btnClear.addEventListener('click', () => {
        resetCanvas(); topBox.innerHTML=''; barsBox.innerHTML=''; prevCtx.clearRect(0,0,prevCanvas.width,prevCanvas.height);
      });

      // ==== Cargar modelo con fallback ====
      let model=null, lastTried=[];
      async function getModel(){
        if(model) return model;
        topBox.textContent = "Cargando modelo‚Ä¶";
        let lastErr = null;
        for(const url of MODEL_URLS){
          try{
            lastTried.push(url);
            model = await tf.loadLayersModel(url);
            topBox.textContent = "Modelo listo ‚úÖ";
            return model;
          }catch(err){
            lastErr = err;
            console.warn("Fall√≥ modelo:", url, err);
          }
        }
        // Si ninguno carg√≥:
        const msg = (lastErr?.message || String(lastErr || "Error desconocido"));
        topBox.innerHTML = `
          <span class="text-red-300">No se pudo cargar el modelo.</span><br/>
          √öltimos intentos:<br/><code class="text-xs">${lastTried.join("<br/>")}</code><br/>
          <span class="text-xs text-zinc-400">Tip: recarga con Ctrl+Shift+R para limpiar cach√©.</span>`;
        throw lastErr;
      }

      // ==== Preprocesado 28x28 ====
      function preprocess(){
        const off = document.createElement('canvas'); off.width=28; off.height=28;
        const octx = off.getContext('2d');
        octx.drawImage(canvas, 0, 0, 28, 28);

        // Preview 56x56
        prevCtx.imageSmoothingEnabled = false;
        prevCtx.fillStyle='#000'; prevCtx.fillRect(0,0,56,56);
        prevCtx.drawImage(off, 0, 0, 56, 56);

        const img = octx.getImageData(0,0,28,28).data;
        const arr = new Float32Array(28*28);
        for(let i=0,j=0;i<img.length;i+=4,j++){
          const v = img[i] / 255;     // blanco=1, negro=0
          arr[j] = v;                 // si un modelo pidiera invertido: usa (1 - v)
        }
        return tf.tensor4d(arr, [1,28,28,1]);
      }

      function renderBars(probs){
        barsBox.innerHTML=''; probs.forEach((p,d)=>{ const pct=(p*100).toFixed(1);
          const el=document.createElement('div');
          el.innerHTML = `
            <div class="flex items-center gap-2">
              <div class="w-5 text-right">${d}</div>
              <div class="flex-1 h-3 bg-zinc-800 rounded">
                <div class="h-3 rounded bg-emerald-500 transition-all duration-500" style="width:${pct}%"></div>
              </div>
              <div class="w-14 text-right tabular-nums">${pct}%</div>
            </div>`;
          barsBox.appendChild(el);
        });
      }
      function renderTop(probs){
        const top = probs.map((p,i)=>({p,i})).sort((a,b)=>b.p-a.p).slice(0,3);
        topBox.innerHTML = top.map(t=>`
          <div class="flex items-center justify-between border border-white/10 rounded px-2 py-1 animate-fade-in">
            <div class="font-semibold text-lg">${t.i}</div>
            <div class="text-emerald-400 font-medium">${(t.p*100).toFixed(1)}%</div>
          </div>`).join('');
      }

      function setLoadingState(isLoading) {
        btnPredict.disabled = isLoading;
        predictText.classList.toggle('hidden', isLoading);
        predictSpinner.classList.toggle('hidden', !isLoading);
        if (isLoading) {
          btnPredict.classList.add('opacity-75');
        } else {
          btnPredict.classList.remove('opacity-75');
        }
      }

      btnPredict.addEventListener('click', async () => {
        try{
          setLoadingState(true);
          const m = await getModel();
          const x = preprocess();        // [1,28,28,1]
          const y = m.predict(x);        // [1,10]
          const probs = Array.from(await y.data());
          x.dispose(); y.dispose();
          renderTop(probs);
          renderBars(probs);
        }catch(err){
          console.error("MNIST predict error:", err);
          const msg = err?.message ? err.message : String(err);
          topBox.textContent = "Error al predecir: " + msg;
        }finally{
          setLoadingState(false);
        }
      });
    })();

    // ===== SMOOTH SCROLL ENHANCEMENT =====
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });

    // ===== PERFORMANCE: Lazy load images =====
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            if (img.dataset.src) {
              img.src = img.dataset.src;
              img.removeAttribute('data-src');
              observer.unobserve(img);
            }
          }
        });
      });
      
      document.querySelectorAll('img[data-src]').forEach(img => {
        imageObserver.observe(img);
      });
    }

    // ===== ANALYTICS (Google Analytics 4) =====
    // Uncomment when you get your GA4 tracking ID
    /*
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-YOUR-TRACKING-ID');
    */
  </script>
</body>
</html>
